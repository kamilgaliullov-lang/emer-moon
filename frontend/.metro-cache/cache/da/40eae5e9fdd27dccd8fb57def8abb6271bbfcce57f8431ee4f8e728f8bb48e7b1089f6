{"dependencies":[{"name":"./helpers","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"kg0rJsyHf+Iyf4Z1AFOYGhKLkW4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"internals\", {\n    enumerable: true,\n    get: function () {\n      return internals;\n    }\n  });\n  Object.defineProperty(exports, \"LockAcquireTimeoutError\", {\n    enumerable: true,\n    get: function () {\n      return LockAcquireTimeoutError;\n    }\n  });\n  Object.defineProperty(exports, \"NavigatorLockAcquireTimeoutError\", {\n    enumerable: true,\n    get: function () {\n      return NavigatorLockAcquireTimeoutError;\n    }\n  });\n  Object.defineProperty(exports, \"ProcessLockAcquireTimeoutError\", {\n    enumerable: true,\n    get: function () {\n      return ProcessLockAcquireTimeoutError;\n    }\n  });\n  exports.navigatorLock = navigatorLock;\n  exports.processLock = processLock;\n  var _helpers = require(_dependencyMap[0], \"./helpers\");\n  /**\n   * @experimental\n   */\n  const internals = {\n    /**\n     * @experimental\n     */\n    debug: !!(globalThis && (0, _helpers.supportsLocalStorage)() && globalThis.localStorage && globalThis.localStorage.getItem('supabase.gotrue-js.locks.debug') === 'true')\n  };\n  /**\n   * An error thrown when a lock cannot be acquired after some amount of time.\n   *\n   * Use the {@link #isAcquireTimeout} property instead of checking with `instanceof`.\n   *\n   * @example\n   * ```ts\n   * import { LockAcquireTimeoutError } from '@supabase/auth-js'\n   *\n   * class CustomLockError extends LockAcquireTimeoutError {\n   *   constructor() {\n   *     super('Lock timed out')\n   *   }\n   * }\n   * ```\n   */\n  class LockAcquireTimeoutError extends Error {\n    constructor(message) {\n      super(message);\n      this.isAcquireTimeout = true;\n    }\n  }\n  /**\n   * Error thrown when the browser Navigator Lock API fails to acquire a lock.\n   *\n   * @example\n   * ```ts\n   * import { NavigatorLockAcquireTimeoutError } from '@supabase/auth-js'\n   *\n   * throw new NavigatorLockAcquireTimeoutError('Lock timed out')\n   * ```\n   */\n  class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError {}\n  /**\n   * Error thrown when the process-level lock helper cannot acquire a lock.\n   *\n   * @example\n   * ```ts\n   * import { ProcessLockAcquireTimeoutError } from '@supabase/auth-js'\n   *\n   * throw new ProcessLockAcquireTimeoutError('Lock timed out')\n   * ```\n   */\n  class ProcessLockAcquireTimeoutError extends LockAcquireTimeoutError {}\n  /**\n   * Implements a global exclusive lock using the Navigator LockManager API. It\n   * is available on all browsers released after 2022-03-15 with Safari being the\n   * last one to release support. If the API is not available, this function will\n   * throw. Make sure you check availablility before configuring {@link\n   * GoTrueClient}.\n   *\n   * You can turn on debugging by setting the `supabase.gotrue-js.locks.debug`\n   * local storage item to `true`.\n   *\n   * Internals:\n   *\n   * Since the LockManager API does not preserve stack traces for the async\n   * function passed in the `request` method, a trick is used where acquiring the\n   * lock releases a previously started promise to run the operation in the `fn`\n   * function. The lock waits for that promise to finish (with or without error),\n   * while the function will finally wait for the result anyway.\n   *\n   * @param name Name of the lock to be acquired.\n   * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n   *                       the lock can't be acquired without waiting. If positive, the lock acquire\n   *                       will time out after so many milliseconds. An error is\n   *                       a timeout if it has `isAcquireTimeout` set to true.\n   * @param fn The operation to run once the lock is acquired.\n   * @example\n   * ```ts\n   * await navigatorLock('sync-user', 1000, async () => {\n   *   await refreshSession()\n   * })\n   * ```\n   */\n  async function navigatorLock(name, acquireTimeout, fn) {\n    if (internals.debug) {\n      console.log('@supabase/gotrue-js: navigatorLock: acquire lock', name, acquireTimeout);\n    }\n    const abortController = new globalThis.AbortController();\n    if (acquireTimeout > 0) {\n      setTimeout(() => {\n        abortController.abort();\n        if (internals.debug) {\n          console.log('@supabase/gotrue-js: navigatorLock acquire timed out', name);\n        }\n      }, acquireTimeout);\n    }\n    // MDN article: https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request\n    // Wrapping navigator.locks.request() with a plain Promise is done as some\n    // libraries like zone.js patch the Promise object to track the execution\n    // context. However, it appears that most browsers use an internal promise\n    // implementation when using the navigator.locks.request() API causing them\n    // to lose context and emit confusing log messages or break certain features.\n    // This wrapping is believed to help zone.js track the execution context\n    // better.\n    await Promise.resolve();\n    try {\n      return await globalThis.navigator.locks.request(name, acquireTimeout === 0 ? {\n        mode: 'exclusive',\n        ifAvailable: true\n      } : {\n        mode: 'exclusive',\n        signal: abortController.signal\n      }, async lock => {\n        if (lock) {\n          if (internals.debug) {\n            console.log('@supabase/gotrue-js: navigatorLock: acquired', name, lock.name);\n          }\n          try {\n            return await fn();\n          } finally {\n            if (internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: released', name, lock.name);\n            }\n          }\n        } else {\n          if (acquireTimeout === 0) {\n            if (internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: not immediately available', name);\n            }\n            throw new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock \"${name}\" immediately failed`);\n          } else {\n            if (internals.debug) {\n              try {\n                const result = await globalThis.navigator.locks.query();\n                console.log('@supabase/gotrue-js: Navigator LockManager state', JSON.stringify(result, null, '  '));\n              } catch (e) {\n                console.warn('@supabase/gotrue-js: Error when querying Navigator LockManager state', e);\n              }\n            }\n            // Browser is not following the Navigator LockManager spec, it\n            // returned a null lock when we didn't use ifAvailable. So we can\n            // pretend the lock is acquired in the name of backward compatibility\n            // and user experience and just run the function.\n            console.warn('@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request');\n            return await fn();\n          }\n        }\n      });\n    } catch (e) {\n      if ((e === null || e === void 0 ? void 0 : e.name) === 'AbortError' && acquireTimeout > 0) {\n        // The lock acquisition was aborted because the timeout fired while the\n        // request was still pending. This typically means another lock holder is\n        // not releasing the lock, possibly due to React Strict Mode's\n        // double-mount/unmount behavior or a component unmounting mid-operation,\n        // leaving an orphaned lock.\n        //\n        // Recovery: use { steal: true } to forcefully acquire the lock. Per the\n        // Web Locks API spec, this releases any currently held lock with the same\n        // name and grants the request immediately, preempting any queued requests.\n        // The previous holder's callback continues running to completion but no\n        // longer holds the lock for exclusion purposes.\n        //\n        // See: https://github.com/supabase/supabase/issues/42505\n        if (internals.debug) {\n          console.log('@supabase/gotrue-js: navigatorLock: acquire timeout, recovering by stealing lock', name);\n        }\n        console.warn(`@supabase/gotrue-js: Lock \"${name}\" was not released within ${acquireTimeout}ms. ` + 'This may indicate an orphaned lock from a component unmount (e.g., React Strict Mode). ' + 'Forcefully acquiring the lock to recover.');\n        return await Promise.resolve().then(() => globalThis.navigator.locks.request(name, {\n          mode: 'exclusive',\n          steal: true\n        }, async lock => {\n          if (lock) {\n            if (internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: recovered (stolen)', name, lock.name);\n            }\n            try {\n              return await fn();\n            } finally {\n              if (internals.debug) {\n                console.log('@supabase/gotrue-js: navigatorLock: released (stolen)', name, lock.name);\n              }\n            }\n          } else {\n            // This should not happen with steal: true, but handle gracefully.\n            console.warn('@supabase/gotrue-js: Navigator LockManager returned null lock even with steal: true');\n            return await fn();\n          }\n        }));\n      }\n      throw e;\n    }\n  }\n  const PROCESS_LOCKS = {};\n  /**\n   * Implements a global exclusive lock that works only in the current process.\n   * Useful for environments like React Native or other non-browser\n   * single-process (i.e. no concept of \"tabs\") environments.\n   *\n   * Use {@link #navigatorLock} in browser environments.\n   *\n   * @param name Name of the lock to be acquired.\n   * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n   *                       the lock can't be acquired without waiting. If positive, the lock acquire\n   *                       will time out after so many milliseconds. An error is\n   *                       a timeout if it has `isAcquireTimeout` set to true.\n   * @param fn The operation to run once the lock is acquired.\n   * @example\n   * ```ts\n   * await processLock('migrate', 5000, async () => {\n   *   await runMigration()\n   * })\n   * ```\n   */\n  async function processLock(name, acquireTimeout, fn) {\n    var _a;\n    const previousOperation = (_a = PROCESS_LOCKS[name]) !== null && _a !== void 0 ? _a : Promise.resolve();\n    // Wrap previousOperation to handle errors without using .catch()\n    // This avoids Firefox content script security errors\n    const previousOperationHandled = (async () => {\n      try {\n        await previousOperation;\n        return null;\n      } catch (e) {\n        // ignore error of previous operation that we're waiting to finish\n        return null;\n      }\n    })();\n    const currentOperation = (async () => {\n      let timeoutId = null;\n      try {\n        // Wait for either previous operation or timeout\n        const timeoutPromise = acquireTimeout >= 0 ? new Promise((_, reject) => {\n          timeoutId = setTimeout(() => {\n            console.warn(`@supabase/gotrue-js: Lock \"${name}\" acquisition timed out after ${acquireTimeout}ms. ` + 'This may be caused by another operation holding the lock. ' + 'Consider increasing lockAcquireTimeout or checking for stuck operations.');\n            reject(new ProcessLockAcquireTimeoutError(`Acquiring process lock with name \"${name}\" timed out`));\n          }, acquireTimeout);\n        }) : null;\n        await Promise.race([previousOperationHandled, timeoutPromise].filter(x => x));\n        // If we reach here, previousOperationHandled won the race\n        // Clear the timeout to prevent false warnings\n        if (timeoutId !== null) {\n          clearTimeout(timeoutId);\n        }\n      } catch (e) {\n        // Clear the timeout on error path as well\n        if (timeoutId !== null) {\n          clearTimeout(timeoutId);\n        }\n        // Re-throw timeout errors, ignore others\n        if (e && e.isAcquireTimeout) {\n          throw e;\n        }\n        // Fall through to run fn() - previous operation finished with error\n      }\n      // Previous operations finished and we didn't get a race on the acquire\n      // timeout, so the current operation can finally start\n      return await fn();\n    })();\n    PROCESS_LOCKS[name] = (async () => {\n      try {\n        return await currentOperation;\n      } catch (e) {\n        if (e && e.isAcquireTimeout) {\n          // if the current operation timed out, it doesn't mean that the previous\n          // operation finished, so we need continue waiting for it to finish\n          try {\n            await previousOperation;\n          } catch (prevError) {\n            // Ignore previous operation errors\n          }\n          return null;\n        }\n        throw e;\n      }\n    })();\n    // finally wait for the current operation to finish successfully, with an\n    // error or with an acquire timeout error\n    return await currentOperation;\n  }\n});","lineCount":314,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"internals"],[10,22,5,0],[11,4,5,0],[12,2,5,0],[13,2,30,0,"Object"],[13,8,30,0],[13,9,30,0,"defineProperty"],[13,23,30,0],[13,24,30,0,"exports"],[13,31,30,0],[14,4,30,0,"enumerable"],[14,14,30,0],[15,4,30,0,"get"],[15,7,30,0],[15,18,30,0,"get"],[15,19,30,0],[16,6,30,0],[16,13,30,0,"LockAcquireTimeoutError"],[16,36,30,0],[17,4,30,0],[18,2,30,0],[19,2,46,0,"Object"],[19,8,46,0],[19,9,46,0,"defineProperty"],[19,23,46,0],[19,24,46,0,"exports"],[19,31,46,0],[20,4,46,0,"enumerable"],[20,14,46,0],[21,4,46,0,"get"],[21,7,46,0],[21,18,46,0,"get"],[21,19,46,0],[22,6,46,0],[22,13,46,0,"NavigatorLockAcquireTimeoutError"],[22,45,46,0],[23,4,46,0],[24,2,46,0],[25,2,58,0,"Object"],[25,8,58,0],[25,9,58,0,"defineProperty"],[25,23,58,0],[25,24,58,0,"exports"],[25,31,58,0],[26,4,58,0,"enumerable"],[26,14,58,0],[27,4,58,0,"get"],[27,7,58,0],[27,18,58,0,"get"],[27,19,58,0],[28,6,58,0],[28,13,58,0,"ProcessLockAcquireTimeoutError"],[28,43,58,0],[29,4,58,0],[30,2,58,0],[31,2,91,0,"exports"],[31,9,91,0],[31,10,91,0,"navigatorLock"],[31,23,91,0],[31,26,91,0,"navigatorLock"],[31,39,91,0],[32,2,232,0,"exports"],[32,9,232,0],[32,10,232,0,"processLock"],[32,21,232,0],[32,24,232,0,"processLock"],[32,35,232,0],[33,2,1,0],[33,6,1,0,"_helpers"],[33,14,1,0],[33,17,1,0,"require"],[33,24,1,0],[33,25,1,0,"_dependencyMap"],[33,39,1,0],[34,2,2,0],[35,0,3,0],[36,0,4,0],[37,2,5,7],[37,8,5,13,"internals"],[37,17,5,22],[37,20,5,25],[38,4,6,4],[39,0,7,0],[40,0,8,0],[41,4,9,4,"debug"],[41,9,9,9],[41,11,9,11],[41,12,9,12],[41,14,9,14,"globalThis"],[41,24,9,24],[41,28,10,8],[41,32,10,8,"supportsLocalStorage"],[41,40,10,28],[41,41,10,28,"supportsLocalStorage"],[41,61,10,28],[41,63,10,29],[41,64,10,30],[41,68,11,8,"globalThis"],[41,78,11,18],[41,79,11,19,"localStorage"],[41,91,11,31],[41,95,12,8,"globalThis"],[41,105,12,18],[41,106,12,19,"localStorage"],[41,118,12,31],[41,119,12,32,"getItem"],[41,126,12,39],[41,127,12,40],[41,159,12,72],[41,160,12,73],[41,165,12,78],[41,171,12,84],[42,2,13,0],[42,3,13,1],[43,2,14,0],[44,0,15,0],[45,0,16,0],[46,0,17,0],[47,0,18,0],[48,0,19,0],[49,0,20,0],[50,0,21,0],[51,0,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,2,30,7],[59,8,30,13,"LockAcquireTimeoutError"],[59,31,30,36],[59,40,30,45,"Error"],[59,45,30,50],[59,46,30,51],[60,4,31,4,"constructor"],[60,15,31,15,"constructor"],[60,16,31,16,"message"],[60,23,31,23],[60,25,31,25],[61,6,32,8],[61,11,32,13],[61,12,32,14,"message"],[61,19,32,21],[61,20,32,22],[62,6,33,8],[62,10,33,12],[62,11,33,13,"isAcquireTimeout"],[62,27,33,29],[62,30,33,32],[62,34,33,36],[63,4,34,4],[64,2,35,0],[65,2,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,0,44,0],[74,0,45,0],[75,2,46,7],[75,8,46,13,"NavigatorLockAcquireTimeoutError"],[75,40,46,45],[75,49,46,54,"LockAcquireTimeoutError"],[75,72,46,77],[75,73,46,78],[76,2,48,0],[77,0,49,0],[78,0,50,0],[79,0,51,0],[80,0,52,0],[81,0,53,0],[82,0,54,0],[83,0,55,0],[84,0,56,0],[85,0,57,0],[86,2,58,7],[86,8,58,13,"ProcessLockAcquireTimeoutError"],[86,38,58,43],[86,47,58,52,"LockAcquireTimeoutError"],[86,70,58,75],[86,71,58,76],[87,2,60,0],[88,0,61,0],[89,0,62,0],[90,0,63,0],[91,0,64,0],[92,0,65,0],[93,0,66,0],[94,0,67,0],[95,0,68,0],[96,0,69,0],[97,0,70,0],[98,0,71,0],[99,0,72,0],[100,0,73,0],[101,0,74,0],[102,0,75,0],[103,0,76,0],[104,0,77,0],[105,0,78,0],[106,0,79,0],[107,0,80,0],[108,0,81,0],[109,0,82,0],[110,0,83,0],[111,0,84,0],[112,0,85,0],[113,0,86,0],[114,0,87,0],[115,0,88,0],[116,0,89,0],[117,0,90,0],[118,2,91,7],[118,17,91,22,"navigatorLock"],[118,30,91,35,"navigatorLock"],[118,31,91,36,"name"],[118,35,91,40],[118,37,91,42,"acquireTimeout"],[118,51,91,56],[118,53,91,58,"fn"],[118,55,91,60],[118,57,91,62],[119,4,92,4],[119,8,92,8,"internals"],[119,17,92,17],[119,18,92,18,"debug"],[119,23,92,23],[119,25,92,25],[120,6,93,8,"console"],[120,13,93,15],[120,14,93,16,"log"],[120,17,93,19],[120,18,93,20],[120,68,93,70],[120,70,93,72,"name"],[120,74,93,76],[120,76,93,78,"acquireTimeout"],[120,90,93,92],[120,91,93,93],[121,4,94,4],[122,4,95,4],[122,10,95,10,"abortController"],[122,25,95,25],[122,28,95,28],[122,32,95,32,"globalThis"],[122,42,95,42],[122,43,95,43,"AbortController"],[122,58,95,58],[122,59,95,59],[122,60,95,60],[123,4,96,4],[123,8,96,8,"acquireTimeout"],[123,22,96,22],[123,25,96,25],[123,26,96,26],[123,28,96,28],[124,6,97,8,"setTimeout"],[124,16,97,18],[124,17,97,19],[124,23,97,25],[125,8,98,12,"abortController"],[125,23,98,27],[125,24,98,28,"abort"],[125,29,98,33],[125,30,98,34],[125,31,98,35],[126,8,99,12],[126,12,99,16,"internals"],[126,21,99,25],[126,22,99,26,"debug"],[126,27,99,31],[126,29,99,33],[127,10,100,16,"console"],[127,17,100,23],[127,18,100,24,"log"],[127,21,100,27],[127,22,100,28],[127,76,100,82],[127,78,100,84,"name"],[127,82,100,88],[127,83,100,89],[128,8,101,12],[129,6,102,8],[129,7,102,9],[129,9,102,11,"acquireTimeout"],[129,23,102,25],[129,24,102,26],[130,4,103,4],[131,4,104,4],[132,4,105,4],[133,4,106,4],[134,4,107,4],[135,4,108,4],[136,4,109,4],[137,4,110,4],[138,4,111,4],[139,4,112,4],[139,10,112,10,"Promise"],[139,17,112,17],[139,18,112,18,"resolve"],[139,25,112,25],[139,26,112,26],[139,27,112,27],[140,4,113,4],[140,8,113,8],[141,6,114,8],[141,13,114,15],[141,19,114,21,"globalThis"],[141,29,114,31],[141,30,114,32,"navigator"],[141,39,114,41],[141,40,114,42,"locks"],[141,45,114,47],[141,46,114,48,"request"],[141,53,114,55],[141,54,114,56,"name"],[141,58,114,60],[141,60,114,62,"acquireTimeout"],[141,74,114,76],[141,79,114,81],[141,80,114,82],[141,83,115,14],[142,8,116,16,"mode"],[142,12,116,20],[142,14,116,22],[142,25,116,33],[143,8,117,16,"ifAvailable"],[143,19,117,27],[143,21,117,29],[144,6,118,12],[144,7,118,13],[144,10,119,14],[145,8,120,16,"mode"],[145,12,120,20],[145,14,120,22],[145,25,120,33],[146,8,121,16,"signal"],[146,14,121,22],[146,16,121,24,"abortController"],[146,31,121,39],[146,32,121,40,"signal"],[147,6,122,12],[147,7,122,13],[147,9,122,15],[147,15,122,22,"lock"],[147,19,122,26],[147,23,122,31],[148,8,123,12],[148,12,123,16,"lock"],[148,16,123,20],[148,18,123,22],[149,10,124,16],[149,14,124,20,"internals"],[149,23,124,29],[149,24,124,30,"debug"],[149,29,124,35],[149,31,124,37],[150,12,125,20,"console"],[150,19,125,27],[150,20,125,28,"log"],[150,23,125,31],[150,24,125,32],[150,70,125,78],[150,72,125,80,"name"],[150,76,125,84],[150,78,125,86,"lock"],[150,82,125,90],[150,83,125,91,"name"],[150,87,125,95],[150,88,125,96],[151,10,126,16],[152,10,127,16],[152,14,127,20],[153,12,128,20],[153,19,128,27],[153,25,128,33,"fn"],[153,27,128,35],[153,28,128,36],[153,29,128,37],[154,10,129,16],[154,11,129,17],[154,20,130,24],[155,12,131,20],[155,16,131,24,"internals"],[155,25,131,33],[155,26,131,34,"debug"],[155,31,131,39],[155,33,131,41],[156,14,132,24,"console"],[156,21,132,31],[156,22,132,32,"log"],[156,25,132,35],[156,26,132,36],[156,72,132,82],[156,74,132,84,"name"],[156,78,132,88],[156,80,132,90,"lock"],[156,84,132,94],[156,85,132,95,"name"],[156,89,132,99],[156,90,132,100],[157,12,133,20],[158,10,134,16],[159,8,135,12],[159,9,135,13],[159,15,136,17],[160,10,137,16],[160,14,137,20,"acquireTimeout"],[160,28,137,34],[160,33,137,39],[160,34,137,40],[160,36,137,42],[161,12,138,20],[161,16,138,24,"internals"],[161,25,138,33],[161,26,138,34,"debug"],[161,31,138,39],[161,33,138,41],[162,14,139,24,"console"],[162,21,139,31],[162,22,139,32,"log"],[162,25,139,35],[162,26,139,36],[162,89,139,99],[162,91,139,101,"name"],[162,95,139,105],[162,96,139,106],[163,12,140,20],[164,12,141,20],[164,18,141,26],[164,22,141,30,"NavigatorLockAcquireTimeoutError"],[164,54,141,62],[164,55,141,63],[164,109,141,117,"name"],[164,113,141,121],[164,135,141,143],[164,136,141,144],[165,10,142,16],[165,11,142,17],[165,17,143,21],[166,12,144,20],[166,16,144,24,"internals"],[166,25,144,33],[166,26,144,34,"debug"],[166,31,144,39],[166,33,144,41],[167,14,145,24],[167,18,145,28],[168,16,146,28],[168,22,146,34,"result"],[168,28,146,40],[168,31,146,43],[168,37,146,49,"globalThis"],[168,47,146,59],[168,48,146,60,"navigator"],[168,57,146,69],[168,58,146,70,"locks"],[168,63,146,75],[168,64,146,76,"query"],[168,69,146,81],[168,70,146,82],[168,71,146,83],[169,16,147,28,"console"],[169,23,147,35],[169,24,147,36,"log"],[169,27,147,39],[169,28,147,40],[169,78,147,90],[169,80,147,92,"JSON"],[169,84,147,96],[169,85,147,97,"stringify"],[169,94,147,106],[169,95,147,107,"result"],[169,101,147,113],[169,103,147,115],[169,107,147,119],[169,109,147,121],[169,113,147,125],[169,114,147,126],[169,115,147,127],[170,14,148,24],[170,15,148,25],[170,16,149,24],[170,23,149,31,"e"],[170,24,149,32],[170,26,149,34],[171,16,150,28,"console"],[171,23,150,35],[171,24,150,36,"warn"],[171,28,150,40],[171,29,150,41],[171,99,150,111],[171,101,150,113,"e"],[171,102,150,114],[171,103,150,115],[172,14,151,24],[173,12,152,20],[174,12,153,20],[175,12,154,20],[176,12,155,20],[177,12,156,20],[178,12,157,20,"console"],[178,19,157,27],[178,20,157,28,"warn"],[178,24,157,32],[178,25,157,33],[178,274,157,282],[178,275,157,283],[179,12,158,20],[179,19,158,27],[179,25,158,33,"fn"],[179,27,158,35],[179,28,158,36],[179,29,158,37],[180,10,159,16],[181,8,160,12],[182,6,161,8],[182,7,161,9],[182,8,161,10],[183,4,162,4],[183,5,162,5],[183,6,163,4],[183,13,163,11,"e"],[183,14,163,12],[183,16,163,14],[184,6,164,8],[184,10,164,12],[184,11,164,13,"e"],[184,12,164,14],[184,17,164,19],[184,21,164,23],[184,25,164,27,"e"],[184,26,164,28],[184,31,164,33],[184,36,164,38],[184,37,164,39],[184,40,164,42],[184,45,164,47],[184,46,164,48],[184,49,164,51,"e"],[184,50,164,52],[184,51,164,53,"name"],[184,55,164,57],[184,61,164,63],[184,73,164,75],[184,77,164,79,"acquireTimeout"],[184,91,164,93],[184,94,164,96],[184,95,164,97],[184,97,164,99],[185,8,165,12],[186,8,166,12],[187,8,167,12],[188,8,168,12],[189,8,169,12],[190,8,170,12],[191,8,171,12],[192,8,172,12],[193,8,173,12],[194,8,174,12],[195,8,175,12],[196,8,176,12],[197,8,177,12],[198,8,178,12],[198,12,178,16,"internals"],[198,21,178,25],[198,22,178,26,"debug"],[198,27,178,31],[198,29,178,33],[199,10,179,16,"console"],[199,17,179,23],[199,18,179,24,"log"],[199,21,179,27],[199,22,179,28],[199,104,179,110],[199,106,179,112,"name"],[199,110,179,116],[199,111,179,117],[200,8,180,12],[201,8,181,12,"console"],[201,15,181,19],[201,16,181,20,"warn"],[201,20,181,24],[201,21,181,25],[201,51,181,55,"name"],[201,55,181,59],[201,84,181,88,"acquireTimeout"],[201,98,181,102],[201,104,181,108],[201,107,182,16],[201,196,182,105],[201,199,183,16],[201,242,183,59],[201,243,183,60],[202,8,184,12],[202,15,184,19],[202,21,184,25,"Promise"],[202,28,184,32],[202,29,184,33,"resolve"],[202,36,184,40],[202,37,184,41],[202,38,184,42],[202,39,184,43,"then"],[202,43,184,47],[202,44,184,48],[202,50,184,54,"globalThis"],[202,60,184,64],[202,61,184,65,"navigator"],[202,70,184,74],[202,71,184,75,"locks"],[202,76,184,80],[202,77,184,81,"request"],[202,84,184,88],[202,85,184,89,"name"],[202,89,184,93],[202,91,184,95],[203,10,185,16,"mode"],[203,14,185,20],[203,16,185,22],[203,27,185,33],[204,10,186,16,"steal"],[204,15,186,21],[204,17,186,23],[205,8,187,12],[205,9,187,13],[205,11,187,15],[205,17,187,22,"lock"],[205,21,187,26],[205,25,187,31],[206,10,188,16],[206,14,188,20,"lock"],[206,18,188,24],[206,20,188,26],[207,12,189,20],[207,16,189,24,"internals"],[207,25,189,33],[207,26,189,34,"debug"],[207,31,189,39],[207,33,189,41],[208,14,190,24,"console"],[208,21,190,31],[208,22,190,32,"log"],[208,25,190,35],[208,26,190,36],[208,82,190,92],[208,84,190,94,"name"],[208,88,190,98],[208,90,190,100,"lock"],[208,94,190,104],[208,95,190,105,"name"],[208,99,190,109],[208,100,190,110],[209,12,191,20],[210,12,192,20],[210,16,192,24],[211,14,193,24],[211,21,193,31],[211,27,193,37,"fn"],[211,29,193,39],[211,30,193,40],[211,31,193,41],[212,12,194,20],[212,13,194,21],[212,22,195,28],[213,14,196,24],[213,18,196,28,"internals"],[213,27,196,37],[213,28,196,38,"debug"],[213,33,196,43],[213,35,196,45],[214,16,197,28,"console"],[214,23,197,35],[214,24,197,36,"log"],[214,27,197,39],[214,28,197,40],[214,83,197,95],[214,85,197,97,"name"],[214,89,197,101],[214,91,197,103,"lock"],[214,95,197,107],[214,96,197,108,"name"],[214,100,197,112],[214,101,197,113],[215,14,198,24],[216,12,199,20],[217,10,200,16],[217,11,200,17],[217,17,201,21],[218,12,202,20],[219,12,203,20,"console"],[219,19,203,27],[219,20,203,28,"warn"],[219,24,203,32],[219,25,203,33],[219,110,203,118],[219,111,203,119],[220,12,204,20],[220,19,204,27],[220,25,204,33,"fn"],[220,27,204,35],[220,28,204,36],[220,29,204,37],[221,10,205,16],[222,8,206,12],[222,9,206,13],[222,10,206,14],[222,11,206,15],[223,6,207,8],[224,6,208,8],[224,12,208,14,"e"],[224,13,208,15],[225,4,209,4],[226,2,210,0],[227,2,211,0],[227,8,211,6,"PROCESS_LOCKS"],[227,21,211,19],[227,24,211,22],[227,25,211,23],[227,26,211,24],[228,2,212,0],[229,0,213,0],[230,0,214,0],[231,0,215,0],[232,0,216,0],[233,0,217,0],[234,0,218,0],[235,0,219,0],[236,0,220,0],[237,0,221,0],[238,0,222,0],[239,0,223,0],[240,0,224,0],[241,0,225,0],[242,0,226,0],[243,0,227,0],[244,0,228,0],[245,0,229,0],[246,0,230,0],[247,0,231,0],[248,2,232,7],[248,17,232,22,"processLock"],[248,28,232,33,"processLock"],[248,29,232,34,"name"],[248,33,232,38],[248,35,232,40,"acquireTimeout"],[248,49,232,54],[248,51,232,56,"fn"],[248,53,232,58],[248,55,232,60],[249,4,233,4],[249,8,233,8,"_a"],[249,10,233,10],[250,4,234,4],[250,10,234,10,"previousOperation"],[250,27,234,27],[250,30,234,30],[250,31,234,31,"_a"],[250,33,234,33],[250,36,234,36,"PROCESS_LOCKS"],[250,49,234,49],[250,50,234,50,"name"],[250,54,234,54],[250,55,234,55],[250,61,234,61],[250,65,234,65],[250,69,234,69,"_a"],[250,71,234,71],[250,76,234,76],[250,81,234,81],[250,82,234,82],[250,85,234,85,"_a"],[250,87,234,87],[250,90,234,90,"Promise"],[250,97,234,97],[250,98,234,98,"resolve"],[250,105,234,105],[250,106,234,106],[250,107,234,107],[251,4,235,4],[252,4,236,4],[253,4,237,4],[253,10,237,10,"previousOperationHandled"],[253,34,237,34],[253,37,237,37],[253,38,237,38],[253,50,237,50],[254,6,238,8],[254,10,238,12],[255,8,239,12],[255,14,239,18,"previousOperation"],[255,31,239,35],[256,8,240,12],[256,15,240,19],[256,19,240,23],[257,6,241,8],[257,7,241,9],[257,8,242,8],[257,15,242,15,"e"],[257,16,242,16],[257,18,242,18],[258,8,243,12],[259,8,244,12],[259,15,244,19],[259,19,244,23],[260,6,245,8],[261,4,246,4],[261,5,246,5],[261,7,246,7],[261,8,246,8],[262,4,247,4],[262,10,247,10,"currentOperation"],[262,26,247,26],[262,29,247,29],[262,30,247,30],[262,42,247,42],[263,6,248,8],[263,10,248,12,"timeoutId"],[263,19,248,21],[263,22,248,24],[263,26,248,28],[264,6,249,8],[264,10,249,12],[265,8,250,12],[266,8,251,12],[266,14,251,18,"timeoutPromise"],[266,28,251,32],[266,31,251,35,"acquireTimeout"],[266,45,251,49],[266,49,251,53],[266,50,251,54],[266,53,252,18],[266,57,252,22,"Promise"],[266,64,252,29],[266,65,252,30],[266,66,252,31,"_"],[266,67,252,32],[266,69,252,34,"reject"],[266,75,252,40],[266,80,252,45],[267,10,253,20,"timeoutId"],[267,19,253,29],[267,22,253,32,"setTimeout"],[267,32,253,42],[267,33,253,43],[267,39,253,49],[268,12,254,24,"console"],[268,19,254,31],[268,20,254,32,"warn"],[268,24,254,36],[268,25,254,37],[268,55,254,67,"name"],[268,59,254,71],[268,92,254,104,"acquireTimeout"],[268,106,254,118],[268,112,254,124],[268,115,255,28],[268,175,255,88],[268,178,256,28],[268,252,256,102],[268,253,256,103],[269,12,257,24,"reject"],[269,18,257,30],[269,19,257,31],[269,23,257,35,"ProcessLockAcquireTimeoutError"],[269,53,257,65],[269,54,257,66],[269,91,257,103,"name"],[269,95,257,107],[269,108,257,120],[269,109,257,121],[269,110,257,122],[270,10,258,20],[270,11,258,21],[270,13,258,23,"acquireTimeout"],[270,27,258,37],[270,28,258,38],[271,8,259,16],[271,9,259,17],[271,10,259,18],[271,13,260,18],[271,17,260,22],[272,8,261,12],[272,14,261,18,"Promise"],[272,21,261,25],[272,22,261,26,"race"],[272,26,261,30],[272,27,261,31],[272,28,261,32,"previousOperationHandled"],[272,52,261,56],[272,54,261,58,"timeoutPromise"],[272,68,261,72],[272,69,261,73],[272,70,261,74,"filter"],[272,76,261,80],[272,77,261,82,"x"],[272,78,261,83],[272,82,261,88,"x"],[272,83,261,89],[272,84,261,90],[272,85,261,91],[273,8,262,12],[274,8,263,12],[275,8,264,12],[275,12,264,16,"timeoutId"],[275,21,264,25],[275,26,264,30],[275,30,264,34],[275,32,264,36],[276,10,265,16,"clearTimeout"],[276,22,265,28],[276,23,265,29,"timeoutId"],[276,32,265,38],[276,33,265,39],[277,8,266,12],[278,6,267,8],[278,7,267,9],[278,8,268,8],[278,15,268,15,"e"],[278,16,268,16],[278,18,268,18],[279,8,269,12],[280,8,270,12],[280,12,270,16,"timeoutId"],[280,21,270,25],[280,26,270,30],[280,30,270,34],[280,32,270,36],[281,10,271,16,"clearTimeout"],[281,22,271,28],[281,23,271,29,"timeoutId"],[281,32,271,38],[281,33,271,39],[282,8,272,12],[283,8,273,12],[284,8,274,12],[284,12,274,16,"e"],[284,13,274,17],[284,17,274,21,"e"],[284,18,274,22],[284,19,274,23,"isAcquireTimeout"],[284,35,274,39],[284,37,274,41],[285,10,275,16],[285,16,275,22,"e"],[285,17,275,23],[286,8,276,12],[287,8,277,12],[288,6,278,8],[289,6,279,8],[290,6,280,8],[291,6,281,8],[291,13,281,15],[291,19,281,21,"fn"],[291,21,281,23],[291,22,281,24],[291,23,281,25],[292,4,282,4],[292,5,282,5],[292,7,282,7],[292,8,282,8],[293,4,283,4,"PROCESS_LOCKS"],[293,17,283,17],[293,18,283,18,"name"],[293,22,283,22],[293,23,283,23],[293,26,283,26],[293,27,283,27],[293,39,283,39],[294,6,284,8],[294,10,284,12],[295,8,285,12],[295,15,285,19],[295,21,285,25,"currentOperation"],[295,37,285,41],[296,6,286,8],[296,7,286,9],[296,8,287,8],[296,15,287,15,"e"],[296,16,287,16],[296,18,287,18],[297,8,288,12],[297,12,288,16,"e"],[297,13,288,17],[297,17,288,21,"e"],[297,18,288,22],[297,19,288,23,"isAcquireTimeout"],[297,35,288,39],[297,37,288,41],[298,10,289,16],[299,10,290,16],[300,10,291,16],[300,14,291,20],[301,12,292,20],[301,18,292,26,"previousOperation"],[301,35,292,43],[302,10,293,16],[302,11,293,17],[302,12,294,16],[302,19,294,23,"prevError"],[302,28,294,32],[302,30,294,34],[303,12,295,20],[304,10,295,20],[305,10,297,16],[305,17,297,23],[305,21,297,27],[306,8,298,12],[307,8,299,12],[307,14,299,18,"e"],[307,15,299,19],[308,6,300,8],[309,4,301,4],[309,5,301,5],[309,7,301,7],[309,8,301,8],[310,4,302,4],[311,4,303,4],[312,4,304,4],[312,11,304,11],[312,17,304,17,"currentOperation"],[312,33,304,33],[313,2,305,0],[314,0,305,1],[314,3]],"functionMap":{"names":["<global>","LockAcquireTimeoutError","LockAcquireTimeoutError#constructor","NavigatorLockAcquireTimeoutError","ProcessLockAcquireTimeoutError","navigatorLock","setTimeout$argument_0","globalThis.navigator.locks.request$argument_2","Promise.resolve.then$argument_0","processLock","<anonymous>","Promise$argument_0","filter$argument_0"],"mappings":"AAA;OC6B;ICC;KDG;CDC;OGW;CHC;OIW;CJC;OKgC;mBCM;SDK;eEoB;SFuC;gDGuB;eDG;aCmB,CH;CLI;OSsB;sCCK;KDS;8BCC;8BCK;2CLC;qBKK;iBDC;iFEE,QF;KDqB;2BCC;KDkB;CTI"},"hasCjsExports":false},"type":"js/module"}]}