{"dependencies":[{"name":"./helpers","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":18,"index":315},"end":{"line":6,"column":38,"index":335}}],"key":"f1qS3jT0PALHpwfgOy1Ia0GaJzk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.ProcessLockAcquireTimeoutError = exports.NavigatorLockAcquireTimeoutError = exports.LockAcquireTimeoutError = exports.internals = void 0;\n  exports.navigatorLock = navigatorLock;\n  exports.processLock = processLock;\n  const helpers_1 = require(_dependencyMap[0], \"./helpers\");\n  /**\n   * @experimental\n   */\n  exports.internals = {\n    /**\n     * @experimental\n     */\n    debug: !!(globalThis && (0, helpers_1.supportsLocalStorage)() && globalThis.localStorage && globalThis.localStorage.getItem('supabase.gotrue-js.locks.debug') === 'true')\n  };\n  /**\n   * An error thrown when a lock cannot be acquired after some amount of time.\n   *\n   * Use the {@link #isAcquireTimeout} property instead of checking with `instanceof`.\n   *\n   * @example\n   * ```ts\n   * import { LockAcquireTimeoutError } from '@supabase/auth-js'\n   *\n   * class CustomLockError extends LockAcquireTimeoutError {\n   *   constructor() {\n   *     super('Lock timed out')\n   *   }\n   * }\n   * ```\n   */\n  class LockAcquireTimeoutError extends Error {\n    constructor(message) {\n      super(message);\n      this.isAcquireTimeout = true;\n    }\n  }\n  exports.LockAcquireTimeoutError = LockAcquireTimeoutError;\n  /**\n   * Error thrown when the browser Navigator Lock API fails to acquire a lock.\n   *\n   * @example\n   * ```ts\n   * import { NavigatorLockAcquireTimeoutError } from '@supabase/auth-js'\n   *\n   * throw new NavigatorLockAcquireTimeoutError('Lock timed out')\n   * ```\n   */\n  class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError {}\n  exports.NavigatorLockAcquireTimeoutError = NavigatorLockAcquireTimeoutError;\n  /**\n   * Error thrown when the process-level lock helper cannot acquire a lock.\n   *\n   * @example\n   * ```ts\n   * import { ProcessLockAcquireTimeoutError } from '@supabase/auth-js'\n   *\n   * throw new ProcessLockAcquireTimeoutError('Lock timed out')\n   * ```\n   */\n  class ProcessLockAcquireTimeoutError extends LockAcquireTimeoutError {}\n  exports.ProcessLockAcquireTimeoutError = ProcessLockAcquireTimeoutError;\n  /**\n   * Implements a global exclusive lock using the Navigator LockManager API. It\n   * is available on all browsers released after 2022-03-15 with Safari being the\n   * last one to release support. If the API is not available, this function will\n   * throw. Make sure you check availablility before configuring {@link\n   * GoTrueClient}.\n   *\n   * You can turn on debugging by setting the `supabase.gotrue-js.locks.debug`\n   * local storage item to `true`.\n   *\n   * Internals:\n   *\n   * Since the LockManager API does not preserve stack traces for the async\n   * function passed in the `request` method, a trick is used where acquiring the\n   * lock releases a previously started promise to run the operation in the `fn`\n   * function. The lock waits for that promise to finish (with or without error),\n   * while the function will finally wait for the result anyway.\n   *\n   * @param name Name of the lock to be acquired.\n   * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n   *                       the lock can't be acquired without waiting. If positive, the lock acquire\n   *                       will time out after so many milliseconds. An error is\n   *                       a timeout if it has `isAcquireTimeout` set to true.\n   * @param fn The operation to run once the lock is acquired.\n   * @example\n   * ```ts\n   * await navigatorLock('sync-user', 1000, async () => {\n   *   await refreshSession()\n   * })\n   * ```\n   */\n  async function navigatorLock(name, acquireTimeout, fn) {\n    if (exports.internals.debug) {\n      console.log('@supabase/gotrue-js: navigatorLock: acquire lock', name, acquireTimeout);\n    }\n    const abortController = new globalThis.AbortController();\n    if (acquireTimeout > 0) {\n      setTimeout(() => {\n        abortController.abort();\n        if (exports.internals.debug) {\n          console.log('@supabase/gotrue-js: navigatorLock acquire timed out', name);\n        }\n      }, acquireTimeout);\n    }\n    // MDN article: https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request\n    // Wrapping navigator.locks.request() with a plain Promise is done as some\n    // libraries like zone.js patch the Promise object to track the execution\n    // context. However, it appears that most browsers use an internal promise\n    // implementation when using the navigator.locks.request() API causing them\n    // to lose context and emit confusing log messages or break certain features.\n    // This wrapping is believed to help zone.js track the execution context\n    // better.\n    await Promise.resolve();\n    try {\n      return await globalThis.navigator.locks.request(name, acquireTimeout === 0 ? {\n        mode: 'exclusive',\n        ifAvailable: true\n      } : {\n        mode: 'exclusive',\n        signal: abortController.signal\n      }, async lock => {\n        if (lock) {\n          if (exports.internals.debug) {\n            console.log('@supabase/gotrue-js: navigatorLock: acquired', name, lock.name);\n          }\n          try {\n            return await fn();\n          } finally {\n            if (exports.internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: released', name, lock.name);\n            }\n          }\n        } else {\n          if (acquireTimeout === 0) {\n            if (exports.internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: not immediately available', name);\n            }\n            throw new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock \"${name}\" immediately failed`);\n          } else {\n            if (exports.internals.debug) {\n              try {\n                const result = await globalThis.navigator.locks.query();\n                console.log('@supabase/gotrue-js: Navigator LockManager state', JSON.stringify(result, null, '  '));\n              } catch (e) {\n                console.warn('@supabase/gotrue-js: Error when querying Navigator LockManager state', e);\n              }\n            }\n            // Browser is not following the Navigator LockManager spec, it\n            // returned a null lock when we didn't use ifAvailable. So we can\n            // pretend the lock is acquired in the name of backward compatibility\n            // and user experience and just run the function.\n            console.warn('@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request');\n            return await fn();\n          }\n        }\n      });\n    } catch (e) {\n      if ((e === null || e === void 0 ? void 0 : e.name) === 'AbortError' && acquireTimeout > 0) {\n        // The lock acquisition was aborted because the timeout fired while the\n        // request was still pending. This typically means another lock holder is\n        // not releasing the lock, possibly due to React Strict Mode's\n        // double-mount/unmount behavior or a component unmounting mid-operation,\n        // leaving an orphaned lock.\n        //\n        // Recovery: use { steal: true } to forcefully acquire the lock. Per the\n        // Web Locks API spec, this releases any currently held lock with the same\n        // name and grants the request immediately, preempting any queued requests.\n        // The previous holder's callback continues running to completion but no\n        // longer holds the lock for exclusion purposes.\n        //\n        // See: https://github.com/supabase/supabase/issues/42505\n        if (exports.internals.debug) {\n          console.log('@supabase/gotrue-js: navigatorLock: acquire timeout, recovering by stealing lock', name);\n        }\n        console.warn(`@supabase/gotrue-js: Lock \"${name}\" was not released within ${acquireTimeout}ms. ` + 'This may indicate an orphaned lock from a component unmount (e.g., React Strict Mode). ' + 'Forcefully acquiring the lock to recover.');\n        return await Promise.resolve().then(() => globalThis.navigator.locks.request(name, {\n          mode: 'exclusive',\n          steal: true\n        }, async lock => {\n          if (lock) {\n            if (exports.internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: recovered (stolen)', name, lock.name);\n            }\n            try {\n              return await fn();\n            } finally {\n              if (exports.internals.debug) {\n                console.log('@supabase/gotrue-js: navigatorLock: released (stolen)', name, lock.name);\n              }\n            }\n          } else {\n            // This should not happen with steal: true, but handle gracefully.\n            console.warn('@supabase/gotrue-js: Navigator LockManager returned null lock even with steal: true');\n            return await fn();\n          }\n        }));\n      }\n      throw e;\n    }\n  }\n  const PROCESS_LOCKS = {};\n  /**\n   * Implements a global exclusive lock that works only in the current process.\n   * Useful for environments like React Native or other non-browser\n   * single-process (i.e. no concept of \"tabs\") environments.\n   *\n   * Use {@link #navigatorLock} in browser environments.\n   *\n   * @param name Name of the lock to be acquired.\n   * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n   *                       the lock can't be acquired without waiting. If positive, the lock acquire\n   *                       will time out after so many milliseconds. An error is\n   *                       a timeout if it has `isAcquireTimeout` set to true.\n   * @param fn The operation to run once the lock is acquired.\n   * @example\n   * ```ts\n   * await processLock('migrate', 5000, async () => {\n   *   await runMigration()\n   * })\n   * ```\n   */\n  async function processLock(name, acquireTimeout, fn) {\n    var _a;\n    const previousOperation = (_a = PROCESS_LOCKS[name]) !== null && _a !== void 0 ? _a : Promise.resolve();\n    // Wrap previousOperation to handle errors without using .catch()\n    // This avoids Firefox content script security errors\n    const previousOperationHandled = (async () => {\n      try {\n        await previousOperation;\n        return null;\n      } catch (e) {\n        // ignore error of previous operation that we're waiting to finish\n        return null;\n      }\n    })();\n    const currentOperation = (async () => {\n      let timeoutId = null;\n      try {\n        // Wait for either previous operation or timeout\n        const timeoutPromise = acquireTimeout >= 0 ? new Promise((_, reject) => {\n          timeoutId = setTimeout(() => {\n            console.warn(`@supabase/gotrue-js: Lock \"${name}\" acquisition timed out after ${acquireTimeout}ms. ` + 'This may be caused by another operation holding the lock. ' + 'Consider increasing lockAcquireTimeout or checking for stuck operations.');\n            reject(new ProcessLockAcquireTimeoutError(`Acquiring process lock with name \"${name}\" timed out`));\n          }, acquireTimeout);\n        }) : null;\n        await Promise.race([previousOperationHandled, timeoutPromise].filter(x => x));\n        // If we reach here, previousOperationHandled won the race\n        // Clear the timeout to prevent false warnings\n        if (timeoutId !== null) {\n          clearTimeout(timeoutId);\n        }\n      } catch (e) {\n        // Clear the timeout on error path as well\n        if (timeoutId !== null) {\n          clearTimeout(timeoutId);\n        }\n        // Re-throw timeout errors, ignore others\n        if (e && e.isAcquireTimeout) {\n          throw e;\n        }\n        // Fall through to run fn() - previous operation finished with error\n      }\n      // Previous operations finished and we didn't get a race on the acquire\n      // timeout, so the current operation can finally start\n      return await fn();\n    })();\n    PROCESS_LOCKS[name] = (async () => {\n      try {\n        return await currentOperation;\n      } catch (e) {\n        if (e && e.isAcquireTimeout) {\n          // if the current operation timed out, it doesn't mean that the previous\n          // operation finished, so we need continue waiting for it to finish\n          try {\n            await previousOperation;\n          } catch (prevError) {\n            // Ignore previous operation errors\n          }\n          return null;\n        }\n        throw e;\n      }\n    })();\n    // finally wait for the current operation to finish successfully, with an\n    // error or with an acquire timeout error\n    return await currentOperation;\n  }\n});","lineCount":294,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"ProcessLockAcquireTimeoutError"],[7,40,3,38],[7,43,3,41,"exports"],[7,50,3,48],[7,51,3,49,"NavigatorLockAcquireTimeoutError"],[7,83,3,81],[7,86,3,84,"exports"],[7,93,3,91],[7,94,3,92,"LockAcquireTimeoutError"],[7,117,3,115],[7,120,3,118,"exports"],[7,127,3,125],[7,128,3,126,"internals"],[7,137,3,135],[7,140,3,138],[7,145,3,143],[7,146,3,144],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"navigatorLock"],[8,23,4,21],[8,26,4,24,"navigatorLock"],[8,39,4,37],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"processLock"],[9,21,5,19],[9,24,5,22,"processLock"],[9,35,5,33],[10,2,6,0],[10,8,6,6,"helpers_1"],[10,17,6,15],[10,20,6,18,"require"],[10,27,6,25],[10,28,6,25,"_dependencyMap"],[10,42,6,25],[10,58,6,37],[10,59,6,38],[11,2,7,0],[12,0,8,0],[13,0,9,0],[14,2,10,0,"exports"],[14,9,10,7],[14,10,10,8,"internals"],[14,19,10,17],[14,22,10,20],[15,4,11,4],[16,0,12,0],[17,0,13,0],[18,4,14,4,"debug"],[18,9,14,9],[18,11,14,11],[18,12,14,12],[18,14,14,14,"globalThis"],[18,24,14,24],[18,28,15,8],[18,29,15,9],[18,30,15,10],[18,32,15,12,"helpers_1"],[18,41,15,21],[18,42,15,22,"supportsLocalStorage"],[18,62,15,42],[18,64,15,44],[18,65,15,45],[18,69,16,8,"globalThis"],[18,79,16,18],[18,80,16,19,"localStorage"],[18,92,16,31],[18,96,17,8,"globalThis"],[18,106,17,18],[18,107,17,19,"localStorage"],[18,119,17,31],[18,120,17,32,"getItem"],[18,127,17,39],[18,128,17,40],[18,160,17,72],[18,161,17,73],[18,166,17,78],[18,172,17,84],[19,2,18,0],[19,3,18,1],[20,2,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,0,24,0],[26,0,25,0],[27,0,26,0],[28,0,27,0],[29,0,28,0],[30,0,29,0],[31,0,30,0],[32,0,31,0],[33,0,32,0],[34,0,33,0],[35,0,34,0],[36,2,35,0],[36,8,35,6,"LockAcquireTimeoutError"],[36,31,35,29],[36,40,35,38,"Error"],[36,45,35,43],[36,46,35,44],[37,4,36,4,"constructor"],[37,15,36,15,"constructor"],[37,16,36,16,"message"],[37,23,36,23],[37,25,36,25],[38,6,37,8],[38,11,37,13],[38,12,37,14,"message"],[38,19,37,21],[38,20,37,22],[39,6,38,8],[39,10,38,12],[39,11,38,13,"isAcquireTimeout"],[39,27,38,29],[39,30,38,32],[39,34,38,36],[40,4,39,4],[41,2,40,0],[42,2,41,0,"exports"],[42,9,41,7],[42,10,41,8,"LockAcquireTimeoutError"],[42,33,41,31],[42,36,41,34,"LockAcquireTimeoutError"],[42,59,41,57],[43,2,42,0],[44,0,43,0],[45,0,44,0],[46,0,45,0],[47,0,46,0],[48,0,47,0],[49,0,48,0],[50,0,49,0],[51,0,50,0],[52,0,51,0],[53,2,52,0],[53,8,52,6,"NavigatorLockAcquireTimeoutError"],[53,40,52,38],[53,49,52,47,"LockAcquireTimeoutError"],[53,72,52,70],[53,73,52,71],[54,2,54,0,"exports"],[54,9,54,7],[54,10,54,8,"NavigatorLockAcquireTimeoutError"],[54,42,54,40],[54,45,54,43,"NavigatorLockAcquireTimeoutError"],[54,77,54,75],[55,2,55,0],[56,0,56,0],[57,0,57,0],[58,0,58,0],[59,0,59,0],[60,0,60,0],[61,0,61,0],[62,0,62,0],[63,0,63,0],[64,0,64,0],[65,2,65,0],[65,8,65,6,"ProcessLockAcquireTimeoutError"],[65,38,65,36],[65,47,65,45,"LockAcquireTimeoutError"],[65,70,65,68],[65,71,65,69],[66,2,67,0,"exports"],[66,9,67,7],[66,10,67,8,"ProcessLockAcquireTimeoutError"],[66,40,67,38],[66,43,67,41,"ProcessLockAcquireTimeoutError"],[66,73,67,71],[67,2,68,0],[68,0,69,0],[69,0,70,0],[70,0,71,0],[71,0,72,0],[72,0,73,0],[73,0,74,0],[74,0,75,0],[75,0,76,0],[76,0,77,0],[77,0,78,0],[78,0,79,0],[79,0,80,0],[80,0,81,0],[81,0,82,0],[82,0,83,0],[83,0,84,0],[84,0,85,0],[85,0,86,0],[86,0,87,0],[87,0,88,0],[88,0,89,0],[89,0,90,0],[90,0,91,0],[91,0,92,0],[92,0,93,0],[93,0,94,0],[94,0,95,0],[95,0,96,0],[96,0,97,0],[97,0,98,0],[98,2,99,0],[98,17,99,15,"navigatorLock"],[98,30,99,28,"navigatorLock"],[98,31,99,29,"name"],[98,35,99,33],[98,37,99,35,"acquireTimeout"],[98,51,99,49],[98,53,99,51,"fn"],[98,55,99,53],[98,57,99,55],[99,4,100,4],[99,8,100,8,"exports"],[99,15,100,15],[99,16,100,16,"internals"],[99,25,100,25],[99,26,100,26,"debug"],[99,31,100,31],[99,33,100,33],[100,6,101,8,"console"],[100,13,101,15],[100,14,101,16,"log"],[100,17,101,19],[100,18,101,20],[100,68,101,70],[100,70,101,72,"name"],[100,74,101,76],[100,76,101,78,"acquireTimeout"],[100,90,101,92],[100,91,101,93],[101,4,102,4],[102,4,103,4],[102,10,103,10,"abortController"],[102,25,103,25],[102,28,103,28],[102,32,103,32,"globalThis"],[102,42,103,42],[102,43,103,43,"AbortController"],[102,58,103,58],[102,59,103,59],[102,60,103,60],[103,4,104,4],[103,8,104,8,"acquireTimeout"],[103,22,104,22],[103,25,104,25],[103,26,104,26],[103,28,104,28],[104,6,105,8,"setTimeout"],[104,16,105,18],[104,17,105,19],[104,23,105,25],[105,8,106,12,"abortController"],[105,23,106,27],[105,24,106,28,"abort"],[105,29,106,33],[105,30,106,34],[105,31,106,35],[106,8,107,12],[106,12,107,16,"exports"],[106,19,107,23],[106,20,107,24,"internals"],[106,29,107,33],[106,30,107,34,"debug"],[106,35,107,39],[106,37,107,41],[107,10,108,16,"console"],[107,17,108,23],[107,18,108,24,"log"],[107,21,108,27],[107,22,108,28],[107,76,108,82],[107,78,108,84,"name"],[107,82,108,88],[107,83,108,89],[108,8,109,12],[109,6,110,8],[109,7,110,9],[109,9,110,11,"acquireTimeout"],[109,23,110,25],[109,24,110,26],[110,4,111,4],[111,4,112,4],[112,4,113,4],[113,4,114,4],[114,4,115,4],[115,4,116,4],[116,4,117,4],[117,4,118,4],[118,4,119,4],[119,4,120,4],[119,10,120,10,"Promise"],[119,17,120,17],[119,18,120,18,"resolve"],[119,25,120,25],[119,26,120,26],[119,27,120,27],[120,4,121,4],[120,8,121,8],[121,6,122,8],[121,13,122,15],[121,19,122,21,"globalThis"],[121,29,122,31],[121,30,122,32,"navigator"],[121,39,122,41],[121,40,122,42,"locks"],[121,45,122,47],[121,46,122,48,"request"],[121,53,122,55],[121,54,122,56,"name"],[121,58,122,60],[121,60,122,62,"acquireTimeout"],[121,74,122,76],[121,79,122,81],[121,80,122,82],[121,83,123,14],[122,8,124,16,"mode"],[122,12,124,20],[122,14,124,22],[122,25,124,33],[123,8,125,16,"ifAvailable"],[123,19,125,27],[123,21,125,29],[124,6,126,12],[124,7,126,13],[124,10,127,14],[125,8,128,16,"mode"],[125,12,128,20],[125,14,128,22],[125,25,128,33],[126,8,129,16,"signal"],[126,14,129,22],[126,16,129,24,"abortController"],[126,31,129,39],[126,32,129,40,"signal"],[127,6,130,12],[127,7,130,13],[127,9,130,15],[127,15,130,22,"lock"],[127,19,130,26],[127,23,130,31],[128,8,131,12],[128,12,131,16,"lock"],[128,16,131,20],[128,18,131,22],[129,10,132,16],[129,14,132,20,"exports"],[129,21,132,27],[129,22,132,28,"internals"],[129,31,132,37],[129,32,132,38,"debug"],[129,37,132,43],[129,39,132,45],[130,12,133,20,"console"],[130,19,133,27],[130,20,133,28,"log"],[130,23,133,31],[130,24,133,32],[130,70,133,78],[130,72,133,80,"name"],[130,76,133,84],[130,78,133,86,"lock"],[130,82,133,90],[130,83,133,91,"name"],[130,87,133,95],[130,88,133,96],[131,10,134,16],[132,10,135,16],[132,14,135,20],[133,12,136,20],[133,19,136,27],[133,25,136,33,"fn"],[133,27,136,35],[133,28,136,36],[133,29,136,37],[134,10,137,16],[134,11,137,17],[134,20,138,24],[135,12,139,20],[135,16,139,24,"exports"],[135,23,139,31],[135,24,139,32,"internals"],[135,33,139,41],[135,34,139,42,"debug"],[135,39,139,47],[135,41,139,49],[136,14,140,24,"console"],[136,21,140,31],[136,22,140,32,"log"],[136,25,140,35],[136,26,140,36],[136,72,140,82],[136,74,140,84,"name"],[136,78,140,88],[136,80,140,90,"lock"],[136,84,140,94],[136,85,140,95,"name"],[136,89,140,99],[136,90,140,100],[137,12,141,20],[138,10,142,16],[139,8,143,12],[139,9,143,13],[139,15,144,17],[140,10,145,16],[140,14,145,20,"acquireTimeout"],[140,28,145,34],[140,33,145,39],[140,34,145,40],[140,36,145,42],[141,12,146,20],[141,16,146,24,"exports"],[141,23,146,31],[141,24,146,32,"internals"],[141,33,146,41],[141,34,146,42,"debug"],[141,39,146,47],[141,41,146,49],[142,14,147,24,"console"],[142,21,147,31],[142,22,147,32,"log"],[142,25,147,35],[142,26,147,36],[142,89,147,99],[142,91,147,101,"name"],[142,95,147,105],[142,96,147,106],[143,12,148,20],[144,12,149,20],[144,18,149,26],[144,22,149,30,"NavigatorLockAcquireTimeoutError"],[144,54,149,62],[144,55,149,63],[144,109,149,117,"name"],[144,113,149,121],[144,135,149,143],[144,136,149,144],[145,10,150,16],[145,11,150,17],[145,17,151,21],[146,12,152,20],[146,16,152,24,"exports"],[146,23,152,31],[146,24,152,32,"internals"],[146,33,152,41],[146,34,152,42,"debug"],[146,39,152,47],[146,41,152,49],[147,14,153,24],[147,18,153,28],[148,16,154,28],[148,22,154,34,"result"],[148,28,154,40],[148,31,154,43],[148,37,154,49,"globalThis"],[148,47,154,59],[148,48,154,60,"navigator"],[148,57,154,69],[148,58,154,70,"locks"],[148,63,154,75],[148,64,154,76,"query"],[148,69,154,81],[148,70,154,82],[148,71,154,83],[149,16,155,28,"console"],[149,23,155,35],[149,24,155,36,"log"],[149,27,155,39],[149,28,155,40],[149,78,155,90],[149,80,155,92,"JSON"],[149,84,155,96],[149,85,155,97,"stringify"],[149,94,155,106],[149,95,155,107,"result"],[149,101,155,113],[149,103,155,115],[149,107,155,119],[149,109,155,121],[149,113,155,125],[149,114,155,126],[149,115,155,127],[150,14,156,24],[150,15,156,25],[150,16,157,24],[150,23,157,31,"e"],[150,24,157,32],[150,26,157,34],[151,16,158,28,"console"],[151,23,158,35],[151,24,158,36,"warn"],[151,28,158,40],[151,29,158,41],[151,99,158,111],[151,101,158,113,"e"],[151,102,158,114],[151,103,158,115],[152,14,159,24],[153,12,160,20],[154,12,161,20],[155,12,162,20],[156,12,163,20],[157,12,164,20],[158,12,165,20,"console"],[158,19,165,27],[158,20,165,28,"warn"],[158,24,165,32],[158,25,165,33],[158,274,165,282],[158,275,165,283],[159,12,166,20],[159,19,166,27],[159,25,166,33,"fn"],[159,27,166,35],[159,28,166,36],[159,29,166,37],[160,10,167,16],[161,8,168,12],[162,6,169,8],[162,7,169,9],[162,8,169,10],[163,4,170,4],[163,5,170,5],[163,6,171,4],[163,13,171,11,"e"],[163,14,171,12],[163,16,171,14],[164,6,172,8],[164,10,172,12],[164,11,172,13,"e"],[164,12,172,14],[164,17,172,19],[164,21,172,23],[164,25,172,27,"e"],[164,26,172,28],[164,31,172,33],[164,36,172,38],[164,37,172,39],[164,40,172,42],[164,45,172,47],[164,46,172,48],[164,49,172,51,"e"],[164,50,172,52],[164,51,172,53,"name"],[164,55,172,57],[164,61,172,63],[164,73,172,75],[164,77,172,79,"acquireTimeout"],[164,91,172,93],[164,94,172,96],[164,95,172,97],[164,97,172,99],[165,8,173,12],[166,8,174,12],[167,8,175,12],[168,8,176,12],[169,8,177,12],[170,8,178,12],[171,8,179,12],[172,8,180,12],[173,8,181,12],[174,8,182,12],[175,8,183,12],[176,8,184,12],[177,8,185,12],[178,8,186,12],[178,12,186,16,"exports"],[178,19,186,23],[178,20,186,24,"internals"],[178,29,186,33],[178,30,186,34,"debug"],[178,35,186,39],[178,37,186,41],[179,10,187,16,"console"],[179,17,187,23],[179,18,187,24,"log"],[179,21,187,27],[179,22,187,28],[179,104,187,110],[179,106,187,112,"name"],[179,110,187,116],[179,111,187,117],[180,8,188,12],[181,8,189,12,"console"],[181,15,189,19],[181,16,189,20,"warn"],[181,20,189,24],[181,21,189,25],[181,51,189,55,"name"],[181,55,189,59],[181,84,189,88,"acquireTimeout"],[181,98,189,102],[181,104,189,108],[181,107,190,16],[181,196,190,105],[181,199,191,16],[181,242,191,59],[181,243,191,60],[182,8,192,12],[182,15,192,19],[182,21,192,25,"Promise"],[182,28,192,32],[182,29,192,33,"resolve"],[182,36,192,40],[182,37,192,41],[182,38,192,42],[182,39,192,43,"then"],[182,43,192,47],[182,44,192,48],[182,50,192,54,"globalThis"],[182,60,192,64],[182,61,192,65,"navigator"],[182,70,192,74],[182,71,192,75,"locks"],[182,76,192,80],[182,77,192,81,"request"],[182,84,192,88],[182,85,192,89,"name"],[182,89,192,93],[182,91,192,95],[183,10,193,16,"mode"],[183,14,193,20],[183,16,193,22],[183,27,193,33],[184,10,194,16,"steal"],[184,15,194,21],[184,17,194,23],[185,8,195,12],[185,9,195,13],[185,11,195,15],[185,17,195,22,"lock"],[185,21,195,26],[185,25,195,31],[186,10,196,16],[186,14,196,20,"lock"],[186,18,196,24],[186,20,196,26],[187,12,197,20],[187,16,197,24,"exports"],[187,23,197,31],[187,24,197,32,"internals"],[187,33,197,41],[187,34,197,42,"debug"],[187,39,197,47],[187,41,197,49],[188,14,198,24,"console"],[188,21,198,31],[188,22,198,32,"log"],[188,25,198,35],[188,26,198,36],[188,82,198,92],[188,84,198,94,"name"],[188,88,198,98],[188,90,198,100,"lock"],[188,94,198,104],[188,95,198,105,"name"],[188,99,198,109],[188,100,198,110],[189,12,199,20],[190,12,200,20],[190,16,200,24],[191,14,201,24],[191,21,201,31],[191,27,201,37,"fn"],[191,29,201,39],[191,30,201,40],[191,31,201,41],[192,12,202,20],[192,13,202,21],[192,22,203,28],[193,14,204,24],[193,18,204,28,"exports"],[193,25,204,35],[193,26,204,36,"internals"],[193,35,204,45],[193,36,204,46,"debug"],[193,41,204,51],[193,43,204,53],[194,16,205,28,"console"],[194,23,205,35],[194,24,205,36,"log"],[194,27,205,39],[194,28,205,40],[194,83,205,95],[194,85,205,97,"name"],[194,89,205,101],[194,91,205,103,"lock"],[194,95,205,107],[194,96,205,108,"name"],[194,100,205,112],[194,101,205,113],[195,14,206,24],[196,12,207,20],[197,10,208,16],[197,11,208,17],[197,17,209,21],[198,12,210,20],[199,12,211,20,"console"],[199,19,211,27],[199,20,211,28,"warn"],[199,24,211,32],[199,25,211,33],[199,110,211,118],[199,111,211,119],[200,12,212,20],[200,19,212,27],[200,25,212,33,"fn"],[200,27,212,35],[200,28,212,36],[200,29,212,37],[201,10,213,16],[202,8,214,12],[202,9,214,13],[202,10,214,14],[202,11,214,15],[203,6,215,8],[204,6,216,8],[204,12,216,14,"e"],[204,13,216,15],[205,4,217,4],[206,2,218,0],[207,2,219,0],[207,8,219,6,"PROCESS_LOCKS"],[207,21,219,19],[207,24,219,22],[207,25,219,23],[207,26,219,24],[208,2,220,0],[209,0,221,0],[210,0,222,0],[211,0,223,0],[212,0,224,0],[213,0,225,0],[214,0,226,0],[215,0,227,0],[216,0,228,0],[217,0,229,0],[218,0,230,0],[219,0,231,0],[220,0,232,0],[221,0,233,0],[222,0,234,0],[223,0,235,0],[224,0,236,0],[225,0,237,0],[226,0,238,0],[227,0,239,0],[228,2,240,0],[228,17,240,15,"processLock"],[228,28,240,26,"processLock"],[228,29,240,27,"name"],[228,33,240,31],[228,35,240,33,"acquireTimeout"],[228,49,240,47],[228,51,240,49,"fn"],[228,53,240,51],[228,55,240,53],[229,4,241,4],[229,8,241,8,"_a"],[229,10,241,10],[230,4,242,4],[230,10,242,10,"previousOperation"],[230,27,242,27],[230,30,242,30],[230,31,242,31,"_a"],[230,33,242,33],[230,36,242,36,"PROCESS_LOCKS"],[230,49,242,49],[230,50,242,50,"name"],[230,54,242,54],[230,55,242,55],[230,61,242,61],[230,65,242,65],[230,69,242,69,"_a"],[230,71,242,71],[230,76,242,76],[230,81,242,81],[230,82,242,82],[230,85,242,85,"_a"],[230,87,242,87],[230,90,242,90,"Promise"],[230,97,242,97],[230,98,242,98,"resolve"],[230,105,242,105],[230,106,242,106],[230,107,242,107],[231,4,243,4],[232,4,244,4],[233,4,245,4],[233,10,245,10,"previousOperationHandled"],[233,34,245,34],[233,37,245,37],[233,38,245,38],[233,50,245,50],[234,6,246,8],[234,10,246,12],[235,8,247,12],[235,14,247,18,"previousOperation"],[235,31,247,35],[236,8,248,12],[236,15,248,19],[236,19,248,23],[237,6,249,8],[237,7,249,9],[237,8,250,8],[237,15,250,15,"e"],[237,16,250,16],[237,18,250,18],[238,8,251,12],[239,8,252,12],[239,15,252,19],[239,19,252,23],[240,6,253,8],[241,4,254,4],[241,5,254,5],[241,7,254,7],[241,8,254,8],[242,4,255,4],[242,10,255,10,"currentOperation"],[242,26,255,26],[242,29,255,29],[242,30,255,30],[242,42,255,42],[243,6,256,8],[243,10,256,12,"timeoutId"],[243,19,256,21],[243,22,256,24],[243,26,256,28],[244,6,257,8],[244,10,257,12],[245,8,258,12],[246,8,259,12],[246,14,259,18,"timeoutPromise"],[246,28,259,32],[246,31,259,35,"acquireTimeout"],[246,45,259,49],[246,49,259,53],[246,50,259,54],[246,53,260,18],[246,57,260,22,"Promise"],[246,64,260,29],[246,65,260,30],[246,66,260,31,"_"],[246,67,260,32],[246,69,260,34,"reject"],[246,75,260,40],[246,80,260,45],[247,10,261,20,"timeoutId"],[247,19,261,29],[247,22,261,32,"setTimeout"],[247,32,261,42],[247,33,261,43],[247,39,261,49],[248,12,262,24,"console"],[248,19,262,31],[248,20,262,32,"warn"],[248,24,262,36],[248,25,262,37],[248,55,262,67,"name"],[248,59,262,71],[248,92,262,104,"acquireTimeout"],[248,106,262,118],[248,112,262,124],[248,115,263,28],[248,175,263,88],[248,178,264,28],[248,252,264,102],[248,253,264,103],[249,12,265,24,"reject"],[249,18,265,30],[249,19,265,31],[249,23,265,35,"ProcessLockAcquireTimeoutError"],[249,53,265,65],[249,54,265,66],[249,91,265,103,"name"],[249,95,265,107],[249,108,265,120],[249,109,265,121],[249,110,265,122],[250,10,266,20],[250,11,266,21],[250,13,266,23,"acquireTimeout"],[250,27,266,37],[250,28,266,38],[251,8,267,16],[251,9,267,17],[251,10,267,18],[251,13,268,18],[251,17,268,22],[252,8,269,12],[252,14,269,18,"Promise"],[252,21,269,25],[252,22,269,26,"race"],[252,26,269,30],[252,27,269,31],[252,28,269,32,"previousOperationHandled"],[252,52,269,56],[252,54,269,58,"timeoutPromise"],[252,68,269,72],[252,69,269,73],[252,70,269,74,"filter"],[252,76,269,80],[252,77,269,82,"x"],[252,78,269,83],[252,82,269,88,"x"],[252,83,269,89],[252,84,269,90],[252,85,269,91],[253,8,270,12],[254,8,271,12],[255,8,272,12],[255,12,272,16,"timeoutId"],[255,21,272,25],[255,26,272,30],[255,30,272,34],[255,32,272,36],[256,10,273,16,"clearTimeout"],[256,22,273,28],[256,23,273,29,"timeoutId"],[256,32,273,38],[256,33,273,39],[257,8,274,12],[258,6,275,8],[258,7,275,9],[258,8,276,8],[258,15,276,15,"e"],[258,16,276,16],[258,18,276,18],[259,8,277,12],[260,8,278,12],[260,12,278,16,"timeoutId"],[260,21,278,25],[260,26,278,30],[260,30,278,34],[260,32,278,36],[261,10,279,16,"clearTimeout"],[261,22,279,28],[261,23,279,29,"timeoutId"],[261,32,279,38],[261,33,279,39],[262,8,280,12],[263,8,281,12],[264,8,282,12],[264,12,282,16,"e"],[264,13,282,17],[264,17,282,21,"e"],[264,18,282,22],[264,19,282,23,"isAcquireTimeout"],[264,35,282,39],[264,37,282,41],[265,10,283,16],[265,16,283,22,"e"],[265,17,283,23],[266,8,284,12],[267,8,285,12],[268,6,286,8],[269,6,287,8],[270,6,288,8],[271,6,289,8],[271,13,289,15],[271,19,289,21,"fn"],[271,21,289,23],[271,22,289,24],[271,23,289,25],[272,4,290,4],[272,5,290,5],[272,7,290,7],[272,8,290,8],[273,4,291,4,"PROCESS_LOCKS"],[273,17,291,17],[273,18,291,18,"name"],[273,22,291,22],[273,23,291,23],[273,26,291,26],[273,27,291,27],[273,39,291,39],[274,6,292,8],[274,10,292,12],[275,8,293,12],[275,15,293,19],[275,21,293,25,"currentOperation"],[275,37,293,41],[276,6,294,8],[276,7,294,9],[276,8,295,8],[276,15,295,15,"e"],[276,16,295,16],[276,18,295,18],[277,8,296,12],[277,12,296,16,"e"],[277,13,296,17],[277,17,296,21,"e"],[277,18,296,22],[277,19,296,23,"isAcquireTimeout"],[277,35,296,39],[277,37,296,41],[278,10,297,16],[279,10,298,16],[280,10,299,16],[280,14,299,20],[281,12,300,20],[281,18,300,26,"previousOperation"],[281,35,300,43],[282,10,301,16],[282,11,301,17],[282,12,302,16],[282,19,302,23,"prevError"],[282,28,302,32],[282,30,302,34],[283,12,303,20],[284,10,303,20],[285,10,305,16],[285,17,305,23],[285,21,305,27],[286,8,306,12],[287,8,307,12],[287,14,307,18,"e"],[287,15,307,19],[288,6,308,8],[289,4,309,4],[289,5,309,5],[289,7,309,7],[289,8,309,8],[290,4,310,4],[291,4,311,4],[292,4,312,4],[292,11,312,11],[292,17,312,17,"currentOperation"],[292,33,312,33],[293,2,313,0],[294,0,313,1],[294,3]],"functionMap":{"names":["<global>","LockAcquireTimeoutError","LockAcquireTimeoutError#constructor","NavigatorLockAcquireTimeoutError","ProcessLockAcquireTimeoutError","navigatorLock","setTimeout$argument_0","globalThis.navigator.locks.request$argument_2","Promise.resolve.then$argument_0","processLock","<anonymous>","Promise$argument_0","filter$argument_0"],"mappings":"AAA;ACkC;ICC;KDG;CDC;AGY;CHC;AIY;CJC;AKiC;mBCM;SDK;eEoB;SFuC;gDGuB;eDG;aCmB,CH;CLI;ASsB;sCCK;KDS;8BCC;8BCK;2CLC;qBKK;iBDC;iFEE,QF;KDqB;2BCC;KDkB;CTI"},"hasCjsExports":true},"type":"js/module"}]}